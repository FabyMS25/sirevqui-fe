<div class="position-relative mx-n4 mt-n4">
    <div class="profile-wid-bg profile-setting-img">
        <img src="assets/images/profile-bg.jpg" class="profile-wid-img" alt="">
        <div class="overlay-content">
            <div class="text-end p-3">
                <div class="p-0 ms-auto rounded-circle profile-photo-edit">
                    <input id="profile-foreground-img-file-input" type="file" class="profile-foreground-img-file-input">
                    <label for="profile-foreground-img-file-input" class="profile-photo-edit btn btn-light">
                        <i class="ri-image-edit-line align-bottom me-1"></i> Cambiar Portada
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xxl-3">
        <div class="card mt-n5">
            <div class="card-body p-4">
                <div class="text-center">
                    <div class="profile-user position-relative d-inline-block mx-auto  mb-4">
                        <img [src]="'assets/images/users/'+avatar" 
                            class="rounded-circle avatar-xl img-thumbnail user-profile-image" alt="user-profile-image">
                        <div class="avatar-xs p-0 rounded-circle profile-photo-edit">
                            <input id="profile-img-file-input" type="file" class="profile-img-file-input">
                            <label for="profile-img-file-input" class="profile-photo-edit avatar-xs">
                                <span class="avatar-title rounded-circle bg-light text-body">
                                    <i class="ri-camera-fill"></i>
                                </span>
                            </label>
                        </div>
                    </div>
                    <h5 class="fs-16 mb-1">{{userData.designacion.personaDto.fullName}}</h5>
                    <p class="text-muted mb-0">{{userData.email}}</p>
                </div>
            </div>
        </div><!--end card-->
        <div class="card">
            <div class="card-body">
                <div class="d-flex align-items-center mb-5">
                    <div class="flex-grow-1">
                        <h5 class="card-title mb-0">Complete Your Profile</h5>
                    </div>
                    <div class="flex-shrink-0">
                        <a href="javascript:void(0);" class="badge bg-light text-primary fs-12"><i
                                class="ri-edit-box-line align-bottom me-1"></i> Edit</a>
                    </div>
                </div>
                <div class="progress animated-progess custom-progress progress-label">
                    <div class="progress-bar bg-danger" role="progressbar" style="width: 30%" aria-valuenow="30"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="label">30%</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="d-flex align-items-center mb-4">
                    <div class="flex-grow-1">
                        <h5 class="card-title mb-0">Portfolio</h5>
                    </div>
                    <div class="flex-shrink-0">
                        <a href="javascript:void(0);" class="badge bg-light text-primary fs-12"><i
                                class="ri-add-fill align-bottom me-1"></i> Add</a>
                    </div>
                </div>
                @for(data of userData.portfolio;track $index){
                <div class="mb-3 d-flex">
                    <div class="avatar-xs d-block flex-shrink-0 me-3">
                        <span class="avatar-title rounded-circle fs-16 bg-{{data.bg_color}} text-body">
                            <i class="ri-{{data.logo}}-fill"></i>
                        </span>
                    </div>
                    <input type="email" class="form-control" id="gitUsername" placeholder="Username"
                        value="{{data.link}}">
                </div>
            }
            </div>
        </div><!--end card-->
    </div><!--end col-->
    <div class="col-xxl-9">
        <div class="card mt-xxl-n5">
            <div class="card-header">
                <ul ngbNav #customNav="ngbNav" [activeId]="1"
                    class="nav nav-tabs-custom rounded card-header-tabs border-bottom-0" role="tablist">
                    <li [ngbNavItem]="1" class="nav-item">
                        <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                            <i class="fas fa-home"></i>
                            Datos Personales
                        </a>
                        <ng-template ngbNavContent>
                            <form (ngSubmit)="updatePersona()" #userForm="ngForm" class="tablelist-form" >
                            <!-- <form action="updatePersona()"> -->
                                
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="nombre" class="form-label">Nombre(s)</label>
                                            <input type="text" class="form-control" id="nombre"
                                                placeholder="Ingresa tu Nombre" value="{{persona.nombre}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="apPaterno" class="form-label">Apellido Paterno</label>
                                            <input type="text" class="form-control" id="apPaterno"
                                                placeholder="Ingresa tu Apellido Paterno" value="{{persona.apPaterno}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="apMaterno" class="form-label">Apellido Materno</label>
                                            <input type="text" class="form-control" id="apMaterno"
                                                placeholder="Ingresa tu Apellido Paterno" value="{{persona.apMaterno}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="sexo" class="form-label">Genero:</label>    
                                            <select class="form-control" data-choices [value]="persona.sexo"
                                                data-choices-search-false name="sexo"
                                                id="sexo">
                                                <option value="M">Masculino</option>
                                                <option value="F">Femenino</option>
                                            </select>
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="nroCarnet" class="form-label">Nro Carnet:</label>
                                            <input type="text" class="form-control" minlength="5" maxlength="20"
                                                id="nroCarnet" placeholder="Ingresar Numero de Carnet"
                                                value="{{persona.nroCarnet}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="ciExpedido" class="form-label">Expedido</label>          
                                            <select class="form-select" required id="ciExpedito" name="ciExpedito" [(ngModel)]="persona.ciExpedito">
                                                <option *ngFor="let ex of CityAcronym" [ngValue]="ex.descripcion">
                                                {{ex.descripcion}}
                                                </option>
                                            </select>
                                            <div class="invalid-feedback">El campo es requerido.</div>
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-2">
                                        <div class="mb-3">
                                            <label for="prefijo" class="form-label">Prefijo:</label>
                                            <input type="text" class="form-control" id="prefijo"
                                                value="{{persona.prefijo}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="profesion" class="form-label">Profesión:</label>
                                            <input type="text" class="form-control" id="profesion"
                                                value="{{persona.profesion}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="nroNit" class="form-label">Nro Nit:</label>
                                            <input type="text" class="form-control" minlength="5" maxlength="20"
                                                id="nroNit" placeholder="Ingresar Numero Nit"
                                                value="{{persona.nroNit}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="nroCelular" class="form-label">Nro Celular:</label>
                                            <input type="text" class="form-control" id="nroCelular"
                                                placeholder="Ingresa tu Nro de Celular" value="{{persona.nroCelular}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="correoElectronico" class="form-label">Email:</label>
                                            <input type="email" class="form-control" id="correoElectronico"
                                                placeholder="Ingresa tu CorreoElectronico" value="{{persona.correoElectronico}}">
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-12">
                                        <div class="mb-3">
                                            <label for="direccion" class="form-label">Dirección </label>
                                            <input type="text" class="form-control" id="direccion" placeholder="Ingrese su Direccion"
                                                value="{{persona.direccion}}" />
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="cityInput" class="form-label">Ciudad</label>
                                            <input type="text" class="form-control" id="cityInput" placeholder="City"
                                                value="{{persona.city}}" />
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="countryInput" class="form-label">Departamento</label>
                                            <input type="text" class="form-control" id="countryInput"
                                                placeholder="Country" value="{{persona.country}}" />
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="countryInput" class="form-label">Distrito</label>
                                            <input type="text" class="form-control" id="countryInput"
                                                placeholder="Country" value="{{persona.country}}" />
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-12">
                                        <div class="hstack gap-2 justify-content-end">
                                            <button type="submit" class="btn btn-secondary">Actualizar</button>
                                            <button type="button" class="btn btn-soft-danger">Cancelar</button>
                                        </div>
                                    </div><!--end col-->
                                </div><!--end row-->
                            </form>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="2" class="nav-item">
                        <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                            <i class="far fa-user"></i>
                            Cambiar contraseña
                        </a>
                        <ng-template ngbNavContent>
                            <form (ngSubmit)="changePassword()" [formGroup]="passwordForm">
                                <div class="row g-2">
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="currentPassword" class="form-label">Actual Contraseña*</label>
                                            <input type="password" class="form-control" 
                                                id="currentPassword" formControlName="currentPassword"
                                                placeholder="Ingresa tu contraseña actual" 
                                                [ngClass]="{ 'is-invalid': form['currentPassword'].touched && form['currentPassword'].errors }"
                                              />
                                              @if (form['currentPassword'].touched && form['currentPassword'].errors) {
                                              <div class="invalid-feedback">
                                                @if (form['currentPassword'].errors['required']) {
                                                <div>Debe ingresar su contraseña actual </div>
                                                }
                                                @if (form['currentPassword'].errors['invalidCurrentPassword']) {
                                                <div>Contraseña Incorecta </div>
                                                }
                                              </div>
                                              }
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="newPassword" class="form-label">Nueva Contraseña*</label>
                                            <input type="password" class="form-control" 
                                                id="newPassword" formControlName="newPassword"
                                                placeholder="Ingresa Nueva Contraseña" 
                                                [ngClass]="{ 'is-invalid': form['newPassword'].touched && form['newPassword'].errors }"
                                              />
                                              @if (form['newPassword'].touched && form['newPassword'].errors) {
                                              <div class="invalid-feedback">
                                                @if (form['newPassword'].errors['required']) {
                                                <div>El campo es requerido</div>
                                                }
                                                @if (form['newPassword'].errors['minlength']) {
                                                <div>La contraseña debe tener al menos 6 caracteres</div>
                                                }
                                                @if (form['newPassword'].errors['maxlength']) {
                                                <div>La contraseña no debe exceder de 120 caracteres</div>
                                                }
                                              </div>
                                              }
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-4">
                                        <div>
                                            <label for="confirmPassword" class="form-label">Confirmar Contraseña*
                                            </label>
                                            <input type="password" class="form-control" 
                                                id="confirmPassword" formControlName="confirmPassword"
                                                placeholder="Confirmar Contraseña"
                                                [ngClass]="{ 'is-invalid': form['confirmPassword'].touched && form['confirmPassword'].errors }"
                                              />
                                              @if (form['confirmPassword'].touched && form['confirmPassword'].errors) {
                                              <div class="invalid-feedback">
                                                @if (form['confirmPassword'].errors['required']) {
                                                <div>El campo es requerido</div>
                                                }
                                                @if (form['confirmPassword'].value != form['newPassword'].value ) {
                                                <div>La contraseña no coincide</div>
                                                }
                                              </div>
                                              }
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-12">
                                        <div class="mb-3">
                                            <a href="javascript:void(0);"
                                                class="link-primary text-decoration-underline">Olvidaste tu Contraseña ?</a>
                                        </div>
                                    </div><!--end col-->
                                    <div class="col-lg-12">
                                        <div class="text-end">
                                            <button type="submit" [disabled]="!passwordForm.valid"  class="btn btn-secondary">
                                                Cambiar contraseña
                                            </button>
                                        </div>
                                    </div><!--end col-->
                                </div><!--end row-->
                            </form>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="3" class="nav-item">
                        <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                            <i class="far fa-envelope"></i>
                            Datos de Designacion
                        </a>
                        <ng-template ngbNavContent>
                            <form>
                                <div id="newlink">
                                    <div id="1">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label for="unidad" class="form-label">Unidad</label>
                                                    <input type="text" class="form-control" id="unidad"
                                                        placeholder="Designation" value="{{userData.designacion.gestionCargoDto.cargoDto.unidad}}">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <label for="fechaInicio" class="form-label">Fecha de Adjudicacion</label>
                                                    <div class="row">
                                                        <div class="col-lg-1 align-self-center">
                                                            Del
                                                        </div>
                                                        <div class="col-lg-5">
                                                            <input class="form-control flatpickr-input" type="text"
                                                                mwlFlatpickr [altInput]="true"
                                                                [convertModelValue]="true" value="{{userData.designacion.fechaInicio}}">
                                                        </div>
                                                        <div class="col-lg-1 align-self-center ">
                                                            al
                                                        </div>
                                                        <div class="col-lg-5">
                                                            <input class="form-control flatpickr-input" type="text"
                                                                mwlFlatpickr [altInput]="true"
                                                                [convertModelValue]="true" value="{{userData.designacion.fechaFin}}">
                                                        </div>
                                                    </div>    
                                                </div>
                                            </div><!--end col-->
                                        </div>
                                        <!--end row-->
                                    </div>
                                </div>
                            </form>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="4" class="nav-item">
                        <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                            <i class="far fa-envelope"></i>
                            Politicas y Privacidad
                        </a>
                        <ng-template ngbNavContent>
                            <div class="mb-4 pb-2">
                                <h5 class="card-title text-decoration-underline mb-3">Security:</h5>
                                <div class="d-flex flex-column flex-sm-row mb-4 mb-sm-0">
                                    <div class="flex-grow-1">
                                        <h6 class="fs-14 mb-1">Two-factor Authentication</h6>
                                        <p class="text-muted">Two-factor authentication is an enhanced security meansur.
                                            Once enabled, you'll be required to give two types of identification when
                                            you log into Google Authentication and SMS are Supported.</p>
                                    </div>
                                    <div class="flex-shrink-0 ms-sm-3">
                                        <a href="javascript:void(0);" class="btn btn-sm btn-primary">Enable Two-facor
                                            Authentication</a>
                                    </div>
                                </div>
                                <div class="d-flex flex-column flex-sm-row mb-4 mb-sm-0 mt-2">
                                    <div class="flex-grow-1">
                                        <h6 class="fs-14 mb-1">Secondary Verification</h6>
                                        <p class="text-muted">The first factor is a password and the second commonly
                                            includes a text with a code sent to your smartphone, or biometrics using
                                            your fingerprint, face, or retina.</p>
                                    </div>
                                    <div class="flex-shrink-0 ms-sm-3">
                                        <a href="javascript:void(0);" class="btn btn-sm btn-primary">Set up secondary
                                            method</a>
                                    </div>
                                </div>
                                <div class="d-flex flex-column flex-sm-row mb-4 mb-sm-0 mt-2">
                                    <div class="flex-grow-1">
                                        <h6 class="fs-14 mb-1">Backup Codes</h6>
                                        <p class="text-muted mb-sm-0">A backup code is automatically generated for you
                                            when you turn on two-factor authentication through your iOS or Android
                                            Twitter app. You can also generate a backup code on twitter.com.</p>
                                    </div>
                                    <div class="flex-shrink-0 ms-sm-3">
                                        <a href="javascript:void(0);" class="btn btn-sm btn-primary">Generate backup
                                            codes</a>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h5 class="card-title text-decoration-underline mb-3">Application Notifications:</h5>
                                <ul class="list-unstyled mb-0">
                                    <li class="d-flex">
                                        <div class="flex-grow-1">
                                            <label for="directMessage" class="form-check-label fs-14">Direct
                                                messages</label>
                                            <p class="text-muted">Messages from people you follow</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" role="switch"
                                                    id="directMessage" checked />
                                            </div>
                                        </div>
                                    </li>
                                    <li class="d-flex mt-2">
                                        <div class="flex-grow-1">
                                            <label class="form-check-label fs-14" for="desktopNotification">
                                                Show desktop notifications
                                            </label>
                                            <p class="text-muted">Choose the option you want as your default setting.
                                                Block a site: Next to "Not allowed to send notifications," click Add.
                                            </p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" role="switch"
                                                    id="desktopNotification" checked />
                                            </div>
                                        </div>
                                    </li>
                                    <li class="d-flex mt-2">
                                        <div class="flex-grow-1">
                                            <label class="form-check-label fs-14" for="emailNotification">
                                                Show email notifications
                                            </label>
                                            <p class="text-muted"> Under Settings, choose Notifications. Under Select an
                                                account, choose the account to enable notifications for. </p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" role="switch"
                                                    id="emailNotification" />
                                            </div>
                                        </div>
                                    </li>
                                    <li class="d-flex mt-2">
                                        <div class="flex-grow-1">
                                            <label class="form-check-label fs-14" for="chatNotification">
                                                Show chat notifications
                                            </label>
                                            <p class="text-muted">To prevent duplicate mobile notifications from the
                                                Gmail and Chat apps, in settings, turn off Chat notifications.</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" role="switch"
                                                    id="chatNotification" />
                                            </div>
                                        </div>
                                    </li>
                                    <li class="d-flex mt-2">
                                        <div class="flex-grow-1">
                                            <label class="form-check-label fs-14" for="purchaesNotification">
                                                Show purchase notifications
                                            </label>
                                            <p class="text-muted">Get real-time purchase alerts to protect yourself from
                                                fraudulent charges.</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" role="switch"
                                                    id="purchaesNotification" />
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h5 class="card-title text-decoration-underline mb-3">Delete This Account:</h5>
                                <p class="text-muted">Go to the Data & Privacy section of your profile Account. Scroll
                                    to "Your data & privacy options." Delete your Profile Account. Follow the
                                    instructions to delete your account :</p>
                                <div>
                                    <input type="password" class="form-control" id="passwordInput"
                                        placeholder="Enter your password" value="make@321654987"
                                        style="max-width: 265px;">
                                </div>
                                <div class="hstack gap-2 mt-3">
                                    <a href="javascript:void(0);" class="btn btn-soft-danger">Close & Delete This
                                        Account</a>
                                    <a href="javascript:void(0);" class="btn btn-light">Cancel</a>
                                </div>
                            </div>
                        </ng-template>
                    </li>
                </ul>
            </div>
            <div class="card-body p-4">
                <div class="tab-content">
                    <div [ngbNavOutlet]="customNav"></div>
                </div>
            </div>
        </div>
    </div><!--end col-->
</div><!--end row-->